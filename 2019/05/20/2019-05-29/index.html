<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="linux命令繁杂，确必不可少，这里用来总结日常用的命令记录，随时更新…  free 看内存free -s 3 # 持续刷新，每3sfree -m 以M展示free -g 以G展示free -h 更友好的展示，自动选择单位   total 本机的物理内存+swap used 已使用的内存和swap free 尚未分配的">
<meta property="og:type" content="article">
<meta property="og:title" content="linux日常命令记录2(一直更新)">
<meta property="og:url" content="http://yoursite.com/2019/05/20/2019-05-29/index.html">
<meta property="og:site_name" content="易天行">
<meta property="og:description" content="linux命令繁杂，确必不可少，这里用来总结日常用的命令记录，随时更新…  free 看内存free -s 3 # 持续刷新，每3sfree -m 以M展示free -g 以G展示free -h 更友好的展示，自动选择单位   total 本机的物理内存+swap used 已使用的内存和swap free 尚未分配的内存和swap shared 被共享的内存的大小，一般可以忽略 buff/ca">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="evernotecid://851D1360-9E5F-4949-9CED-AC96DA44F46E/appyinxiangcom/2703947/ENResource/p1967">
<meta property="og:image" content="evernotecid://851D1360-9E5F-4949-9CED-AC96DA44F46E/appyinxiangcom/2703947/ENResource/p1968">
<meta property="og:updated_time" content="2019-06-04T02:11:14.171Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="linux日常命令记录2(一直更新)">
<meta name="twitter:description" content="linux命令繁杂，确必不可少，这里用来总结日常用的命令记录，随时更新…  free 看内存free -s 3 # 持续刷新，每3sfree -m 以M展示free -g 以G展示free -h 更友好的展示，自动选择单位   total 本机的物理内存+swap used 已使用的内存和swap free 尚未分配的内存和swap shared 被共享的内存的大小，一般可以忽略 buff/ca">
<meta name="twitter:image" content="evernotecid://851D1360-9E5F-4949-9CED-AC96DA44F46E/appyinxiangcom/2703947/ENResource/p1967">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/05/20/2019-05-29/"/>





  <title>linux日常命令记录2(一直更新) | 易天行</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">易天行</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">积累点滴，汇聚江河</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/05/20/2019-05-29/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Ethan Hunt">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/tx.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="易天行">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">linux日常命令记录2(一直更新)</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-20T00:00:00+08:00">
                2019-05-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>linux命令繁杂，确必不可少，这里用来总结日常用的命令记录，随时更新…</p>
</blockquote>
<h3 id="free-看内存"><a href="#free-看内存" class="headerlink" title="free 看内存"></a>free 看内存</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">free -s 3 # 持续刷新，每3s</span><br><span class="line">free -m 以M展示</span><br><span class="line">free -g 以G展示</span><br><span class="line">free -h 更友好的展示，自动选择单位</span><br></pre></td></tr></table></figure>
<p><img src="evernotecid://851D1360-9E5F-4949-9CED-AC96DA44F46E/appyinxiangcom/2703947/ENResource/p1967" alt="0a725b553b252959a8cb9d6d2cb3ba4c.png"></p>
<ul>
<li>total 本机的物理内存+swap</li>
<li>used 已使用的内存和swap</li>
<li>free 尚未分配的内存和swap</li>
<li>shared 被共享的内存的大小，一般可以忽略</li>
<li>buff/cache buffer 和 cache 使用的物理内存大小。</li>
<li>available 列显示还可以被应用程序使用的物理内存大小。</li>
</ul>
<p>公式：</p>
<ul>
<li><code>available = free + buffer/cache</code></li>
<li><code>total = used + avaliable</code> </li>
</ul>
<blockquote>
<p>free available : 在 free 命令的输出中，有一个 free 列，同时还有一个 available 列。这二者到底有何区别？<br>free 是真正尚未被使用的物理内存数量。available 是从应用程序的角度看到的可用内存数量。Linux 内核为了提升磁盘操作的性能，会消耗一部分内存去缓存磁盘数据，就是我们介绍的 buffer 和 cache。所以对于内核来说，buffer 和 cache 都属于已经被使用的内存。当应用程序需要内存时，如果没有足够的 free 内存可以用，内核就会从 buffer 和 cache 中回收内存来满足应用程序的请求。所以从应用程序的角度来说，<code>available = free + buffer + cache</code>。请注意，这只是一个很理想的计算方式，实际中的数据往往有较大的误差。</p>
</blockquote>
<h5 id="另一种显示："><a href="#另一种显示：" class="headerlink" title="另一种显示："></a>另一种显示：</h5><p><img src="evernotecid://851D1360-9E5F-4949-9CED-AC96DA44F46E/appyinxiangcom/2703947/ENResource/p1968" alt="23bec7597f02a9a6e74d6ca833d4a733.png"></p>
<ul>
<li>total 物理内总量</li>
<li>used 所有已使用的内存，包括实际使用的+bufers + cached</li>
<li>free 未被分配的内存</li>
<li>shared 共享内存，一般不会用到</li>
<li>buffers 系统分配但未被使用的buffers数量</li>
<li>cached 系统分配但未被使用的cache数量</li>
<li>第二行 buffers/cache<ul>
<li>used2 实际使用的buffers 与cache总量，也是实际使用的内存总量</li>
<li>free2 未被使用的buffers 与cache 和未被分配的内存之和，这就是系统当前实际可用内存。</li>
</ul>
</li>
</ul>
<p>故：<br>total1 = used1 + free1<br>total1 = used2 + free2<br>used1 = buffers1 + cached1 + used2<br>free2 = free1 + buffers1 + cached1</p>
<blockquote>
<p>那么为什么 free 命令不直接称为 cache 而非要写成 buff/cache？ </p>
</blockquote>
<p>这是因为缓冲区和页高速缓存的实现并非天生就是统一的。在 linux 内核 2.4 中才将它们统一。更早的内核中有两个独立的磁盘缓存：页高速缓存和缓冲区高速缓存。前者缓存页面，后者缓存缓冲区。当你知道了这些故事之后，输出中列的名称可能已经不再重要了。</p>
<h3 id="ss-网络监控"><a href="#ss-网络监控" class="headerlink" title="ss 网络监控"></a>ss 网络监控</h3><p>ss命令用于显示socket状态，建议使用ss命令替代netstat部分命令,例如netsat -ant/lnt等.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">time netstat -lnp | wc -l</span><br><span class="line">time ss -lnp | wc -l</span><br></pre></td></tr></table></figure>
<p><code>ss -tlnp | grep 3100</code></p>
<ul>
<li>-n 地址使用数字展示（端口默认展示为别名）</li>
<li>-p 展示端口所在的进程信息</li>
<li>-l 展示listening的端口</li>
<li>-t TCP</li>
<li>-u UDP</li>
</ul>
<p>或者</p>
<p><code>ss -tlnp sport = :3100</code><br>sport = :3100<br>用于过滤</p>
<h3 id="vmstat-机器综合监测mem-cpu-io"><a href="#vmstat-机器综合监测mem-cpu-io" class="headerlink" title="vmstat 机器综合监测mem,cpu,io"></a>vmstat 机器综合监测mem,cpu,io</h3><p><code>vmstat 1 1000</code> 每秒刷新一次，1000次</p>
<p>字段含义说明：</p>
<ul>
<li>Procs（进程）<ul>
<li>r 等待执行的任务数。展示了正在执行和等待cpu资源的任务个数。当这个值超过了cpu个数，就会出现cpu瓶颈。</li>
<li>B 等待IO的进程数量</li>
</ul>
</li>
<li>Memory(内存)<ul>
<li>swpd 正在使用虚拟的内存大小，单位k</li>
<li>free 空闲内存大小</li>
<li>buff 已用的buff大小，对块设备的读写进行缓冲</li>
<li>cache 已用的cache大小，文件系统的cache</li>
<li>inact 非活跃内存大小，即被标明可回收的内存，区别于free和active</li>
<li>active 活跃的内存大小</li>
</ul>
</li>
<li>Swap<ul>
<li>si 每秒从交换区写入内存的大小（单位：kb/s）（注意是写入）</li>
<li>so 每秒从内存写到交换区的大小</li>
</ul>
</li>
<li>IO<ul>
<li>bi 每秒读取的块数（读磁盘）（<strong>注意是读！就是读！</strong>）。现在的Linux版本块的大小为1024bytes。</li>
<li>bo 每秒写入的块数（写磁盘）</li>
</ul>
</li>
<li>system<ul>
<li>in 每秒中断数，包括时钟中断,这两个值越大，会看到由内核消耗的cpu时间会越多</li>
<li>cs 每秒上下文切换数</li>
</ul>
</li>
<li>CPU（以百分比表示）<ul>
<li>Us 用户进程执行消耗cpu时间(user time)。us的值比较高时，说明用户进程消耗的cpu时间多，但是如果长期超过50%的使用，那么我们就该考虑优化程序算法或其他措施了</li>
<li>Sy 系统进程消耗cpu时间(system time)。sys的值过高时，说明系统内核消耗的cpu资源多，这个不是良性的表现，我们应该检查原因。</li>
<li>Id 空闲时间(包括IO等待时间)</li>
<li>wa 等待IO时间。Wa过高时，说明io等待比较严重，这可能是由于磁盘大量随机访问造成的，也有可能是磁盘的带宽出现瓶颈。</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>关于bi,bo,wa:</strong> vmstat下表io下面的bi表示读取和bo表示写入，单位是block（硬盘读写的最小单位是扇区，一个扇区是512 bytes。一次硬盘读写的数据量不会超过512 bytes，这一次读写的数据量就称为1个block。在大文件的读写操作中，基本可以按乘512来根据block计算出读写的实际数据量，误差很小。）cpu下面的wa，这个wa就是wait的缩写，代表的意思是CPU在等待硬盘读写操作的时间，用百分比表示。wait越大则机器io性能就越差。</p>
</blockquote>
<h3 id="iostat-磁盘性能"><a href="#iostat-磁盘性能" class="headerlink" title="iostat 磁盘性能"></a>iostat 磁盘性能</h3><p><code>iostat 1 10</code> 每1s刷新一次，刷新十次</p>
<h3 id="ps-进程统计"><a href="#ps-进程统计" class="headerlink" title="ps 进程统计"></a>ps 进程统计</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ ps -ef | grep nginx</span><br><span class="line">$ sudo lsof -nP -i:9300 <span class="comment"># 端口 -&gt; 进程</span></span><br><span class="line">$ sudo netstat -tlnp | grep port <span class="comment"># 端口 -&gt; 进程</span></span><br><span class="line">$ sudo lsof -p 12764 | grep TCP <span class="comment"># 进程 -&gt; 端口</span></span><br><span class="line">$ sudo netstat -tlnp | grep pid <span class="comment"># 进程 -&gt; 端口</span></span><br></pre></td></tr></table></figure>
<h3 id="lsof"><a href="#lsof" class="headerlink" title="lsof"></a>lsof</h3><p>查看进程正在打开文件、网络、socket的状态</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">ps -ef | grep nginx  <span class="comment">#进程名 -&gt; pid</span></span><br><span class="line">sudo lsof -i :9300 <span class="comment"># 端口号 -&gt; 进程</span></span><br><span class="line">sudo lsof -i @140.143.60.140  <span class="comment"># ip地址 -&gt; 进程</span></span><br><span class="line">lsof -p 12764 | grep TCP <span class="comment"># 进程 -&gt; 端口</span></span><br><span class="line">或者</span><br><span class="line">lsof -i | grep 12764 <span class="comment"># 进程 -&gt; 端口</span></span><br><span class="line">lsof -p 12764 <span class="comment"># 进程 -&gt; 打开资源状态，包括文件、网络、socket等</span></span><br><span class="line"></span><br><span class="line">-n no host names</span><br><span class="line">-P no port names</span><br><span class="line">-i  select by IPv[46] address: [46][proto][@host|addr][:svc_list|port_list]</span><br><span class="line">-p exclude(^)|select PIDs</span><br></pre></td></tr></table></figure>
<p>mac:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo lsof -nP -i :20002</span><br><span class="line">sudo lsof -p 1234 -P # -P显示端口号</span><br></pre></td></tr></table></figure>
<h3 id="netstat-网络"><a href="#netstat-网络" class="headerlink" title="netstat 网络"></a>netstat 网络</h3><p>查看当前的网络连接状态，主要用来查看本机和外部的的网络连接，包括端口，连接情况</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">netstat -anp <span class="comment"># 所有端口</span></span><br><span class="line">netstat -tlnp <span class="comment"># 所有listening的tcp端口</span></span><br><span class="line"></span><br><span class="line">netstat -tlnp | grep tcp | grep port <span class="comment"># 端口 -&gt; 进程</span></span><br><span class="line">netstat -tlnp | grep pid <span class="comment"># 进程 -&gt; 端口</span></span><br><span class="line"></span><br><span class="line">$ netstat -at <span class="comment"># 所有 tcp</span></span><br><span class="line">$ netstat -au <span class="comment"># 所有 udp </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -p （root）Show the PID and name of the program to which each socket belongs</span></span><br><span class="line"><span class="comment"># -n 不显示主机\端口\用户名,加速输出</span></span><br><span class="line"><span class="comment"># -t 显示tcp连接</span></span><br><span class="line"><span class="comment"># -u 显示udp</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -a Show both listening and non-listening (for TCP this means established  connections)  sockets</span></span><br><span class="line"><span class="comment"># -l Show only listening sockets.  (These are omitted by default.)</span></span><br></pre></td></tr></table></figure>
<h3 id="top-实时监控os"><a href="#top-实时监控os" class="headerlink" title="top 实时监控os"></a>top 实时监控os</h3><p>命令参数：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">top -p 11232 # 仅展示某个进程</span><br><span class="line">top -H -p pid # 显示某个进程所有活跃的线程消耗情况。</span><br><span class="line">top -c  # 展示进程详细信息</span><br></pre></td></tr></table></figure>
<p>执行命令：</p>
<ul>
<li>-p 监控特定的PID</li>
<li>-c 命令行列显示程序名以及参数</li>
<li>-H 设置为线程模式</li>
</ul>
<p>快捷键总结：</p>
<ul>
<li>V 大写V，以进程树的形式展示命令行列</li>
<li>c 命令行列显示程序名以及参数</li>
<li>E 更改总体内存展示单位</li>
<li>e 更改每个进程内存展示的单位</li>
<li>1 展示每个单核的负荷</li>
<li>P 大写P 按cpu排序</li>
<li>M 大写M 按内存排序</li>
<li>t 可以更动态的展示cpu</li>
<li>m 更动态的展示内存</li>
<li>f 更改展示字段</li>
<li>s 改变更新周期</li>
<li>%cpu可能会超过100%,因为是多核心负荷的累加。如果是12核机器，最多可达1200%！。使用<code>cat /proc/cpuinfo| grep &quot;processor&quot;| wc -l</code>查看核心数</li>
</ul>
<p>实用的内部命令：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">top 运行中可以通过 top 的内部命令对进程的显示方式进行控制。内部命令如下：</span><br><span class="line">s – 改变画面更新频率</span><br><span class="line">l – 关闭或开启第一部分第一行 top 信息的表示</span><br><span class="line">t – 关闭或开启第一部分第二行 Tasks 和第三行 Cpus 信息的表示</span><br><span class="line">m – 关闭或开启第一部分第四行 Mem 和 第五行 Swap 信息的表示</span><br><span class="line">N – 以 PID 的大小的顺序排列表示进程列表</span><br><span class="line">P – 以 CPU 占用率大小的顺序排列进程列表</span><br><span class="line">M – 以内存占用率大小的顺序排列进程列表</span><br><span class="line">h – 显示帮助</span><br><span class="line">n – 设置在进程列表所显示进程的数量</span><br><span class="line">q – 退出 top</span><br><span class="line">s – 改变画面更新周期</span><br></pre></td></tr></table></figure>
<p>字段含义：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">序号 列名 含义</span><br><span class="line">a PID 进程id</span><br><span class="line">b PPID 父进程id</span><br><span class="line">c RUSER Real user name</span><br><span class="line">d UID 进程所有者的用户id</span><br><span class="line">e USER 进程所有者的用户名</span><br><span class="line">f GROUP 进程所有者的组名</span><br><span class="line">g TTY 启动进程的终端名。不是从终端启动的进程则显示为 ?</span><br><span class="line">h PR 优先级</span><br><span class="line">i NI nice值。负值表示高优先级，正值表示低优先级</span><br><span class="line">j P 最后使用的CPU，仅在多CPU环境下有意义</span><br><span class="line">k %CPU 上次更新到现在的CPU时间占用百分比</span><br><span class="line">l TIME 进程使用的CPU时间总计，单位秒</span><br><span class="line">m TIME+ 进程使用的CPU时间总计，单位1/100秒</span><br><span class="line">n %MEM 进程使用的物理内存百分比</span><br><span class="line">o VIRT 进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES</span><br><span class="line">p SWAP 进程使用的虚拟内存中，被换出的大小，单位kb。</span><br><span class="line">q RES 驻留内存大小。驻留内存是任务使用的非交换物理内存大小，RES=CODE+DATA</span><br><span class="line">r CODE 可执行代码占用的物理内存大小，单位kb</span><br><span class="line">s DATA 可执行代码以外的部分(数据段+栈)占用的物理内存大小，单位kb</span><br><span class="line">t SHR 共享内存大小，单位kb</span><br><span class="line">u nFLT 页面错误次数</span><br><span class="line">v nDRT 最后一次写入到现在，被修改过的页面数。</span><br><span class="line">w S 进程状态（D=不可中断的睡眠状态，R=运行，S=睡眠，T=跟踪/停止，Z=僵尸进程）</span><br><span class="line">x COMMAND 命令名/命令行</span><br><span class="line">y WCHAN 若该进程在睡眠，则显示睡眠中的系统函数名</span><br><span class="line">z Flags 任务标志，参考 sched.h</span><br><span class="line"></span><br><span class="line">默认情况下仅显示比较重要的 PID、USER、PR、NI、VIRT、RES、SHR、S、%CPU、%MEM、TIME+、COMMAND 列。可以通过下面的快捷键来更改显示内容。</span><br><span class="line"></span><br><span class="line">通过 f 键可以选择显示的内容。按 f 键之后会显示列的列表，按 a-z 即可显示或隐藏对应的列，最后按回车键确定。</span><br><span class="line">按 o 键可以改变列的显示顺序。按小写的 a-z 可以将相应的列向右移动，而大写的 A-Z 可以将相应的列向左移动。最后按回车键确定。</span><br><span class="line">按大写的 F 或 O 键，然后按 a-z 可以将进程按照相应的列进行排序。而大写的 R 键可以将当前的排序倒转。</span><br></pre></td></tr></table></figure>
<h3 id="ip-查看ip地址"><a href="#ip-查看ip地址" class="headerlink" title="ip 查看ip地址"></a>ip 查看ip地址</h3><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">ip addr  <span class="comment"># 网络状态</span></span><br><span class="line">ifconfig <span class="comment"># 网络状态</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 外网地址</span></span><br><span class="line">$ curl ifconfig.me</span><br><span class="line">$ curl icanhazip.com</span><br><span class="line">$ curl ident.me</span><br></pre></td></tr></table></figure>
<h2 id="ls-展示文件创建时间"><a href="#ls-展示文件创建时间" class="headerlink" title="ls 展示文件创建时间"></a>ls 展示文件创建时间</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mac:</span><br><span class="line">ls -lT</span><br><span class="line">-T 参数展示详细时间</span><br><span class="line"></span><br><span class="line">linux：</span><br><span class="line">ls --full-time</span><br><span class="line">ls -la --time-style=full-iso</span><br><span class="line">--full-time</span><br><span class="line">--time-style=full-iso</span><br></pre></td></tr></table></figure>
<h2 id="ps进程启动时间"><a href="#ps进程启动时间" class="headerlink" title="ps进程启动时间"></a>ps进程启动时间</h2><p>ps -ef、ps aux命令可以展示进程的大概信息，启动时间展示不完整，如果想得知进程的详细启动时间，怎么办呢？</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">linux:</span><br><span class="line">$ ps -eo pid,lstart,cmd</span><br><span class="line"></span><br><span class="line">outPut:</span><br><span class="line">PID                  STARTED CMD</span><br><span class="line">    1 Mon Jun 19 21:31:08 2017 /sbin/init</span><br><span class="line">    2 Mon Jun 19 21:31:08 2017 [kthreadd]</span><br><span class="line">    3 Mon Jun 19 21:31:08 2017 [ksoftirqd/0]</span><br></pre></td></tr></table></figure>
<h2 id="cpu系统信息查看proc"><a href="#cpu系统信息查看proc" class="headerlink" title="cpu系统信息查看proc"></a>cpu系统信息查看proc</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># linux内核信息</span></span><br><span class="line">cat /proc/version</span><br><span class="line">uname -a</span><br><span class="line"><span class="comment"># 查看linux发行版信息</span></span><br><span class="line">lsb_release -a</span><br><span class="line"><span class="comment"># cpu核心数</span></span><br><span class="line">cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c </span><br><span class="line"><span class="comment"># 内存情况</span></span><br><span class="line">cat /proc/meminfo</span><br><span class="line">free</span><br><span class="line"><span class="comment"># 磁盘情况</span></span><br><span class="line">sudo fdisk -l</span><br><span class="line"></span><br><span class="line">Linux查看物理CPU个数、核数、逻辑CPU个数</span><br><span class="line"><span class="comment"># 总核数 = 物理CPU个数 X 每颗物理CPU的核数</span></span><br><span class="line"><span class="comment"># 总逻辑CPU数 = 物理CPU个数 X 每颗物理CPU的核数 X 超线程数</span></span><br><span class="line"><span class="comment"># 查看物理CPU个数</span></span><br><span class="line">cat /proc/cpuinfo| grep <span class="string">"physical id"</span>| sort| uniq| wc -l</span><br><span class="line"><span class="comment"># 查看每个物理CPU中core的个数(即核数)</span></span><br><span class="line">cat /proc/cpuinfo| grep <span class="string">"cpu cores"</span>| uniq</span><br><span class="line"><span class="comment"># 查看逻辑CPU的个数</span></span><br><span class="line">cat /proc/cpuinfo| grep <span class="string">"processor"</span>| wc -l</span><br><span class="line"><span class="comment"># 查看CPU信息（型号）</span></span><br><span class="line">cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c</span><br></pre></td></tr></table></figure>
<h3 id="pidstat-展示进程资源占用统计"><a href="#pidstat-展示进程资源占用统计" class="headerlink" title="pidstat 展示进程资源占用统计"></a>pidstat 展示进程资源占用统计</h3><p>使用示例</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pidstat [ 选项 ] [ &lt;时间间隔&gt; ] [ &lt;次数&gt; ]</span><br><span class="line"></span><br><span class="line"># pid4989的cpu详细详细，每个1s打印一次，打印8次</span><br><span class="line">pidstat -u -p 4989 1 8</span><br><span class="line"># 内存</span><br><span class="line">pidstat -r -p 4989 1 8</span><br><span class="line"># 磁盘</span><br><span class="line">pidstat -d -p 4989 1 8</span><br><span class="line"># 展示三者</span><br><span class="line">pidstat -urd -p 4989 1 8</span><br><span class="line"># -h 在一行展示所有信息</span><br><span class="line">pidstat -urdh -p 4989 1 8</span><br><span class="line"># 更多</span><br><span class="line">man pidstat</span><br></pre></td></tr></table></figure>
<p>参数说明</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-u：默认的参数，显示各个进程的cpu使用统计</span><br><span class="line">-r：显示各个进程的内存使用统计</span><br><span class="line">-d：显示各个进程的IO使用情况</span><br><span class="line">-p：指定进程号</span><br><span class="line">-w：显示每个进程的上下文切换情况</span><br><span class="line">-t：显示选择任务的线程的统计信息外的额外信息</span><br><span class="line">-T &#123; TASK | CHILD | ALL &#125;</span><br><span class="line">这个选项指定了pidstat监控的。TASK表示报告独立的task，CHILD关键字表示报告进程下所有线程统计信息。ALL表示报告独立的task和task下面的所有线程。</span><br><span class="line">注意：task和子线程的全局的统计信息和pidstat选项无关。这些统计信息不会对应到当前的统计间隔，这些统计信息只有在子线程kill或者完成的时候才会被收集。</span><br><span class="line">-V：版本号</span><br><span class="line">-h：在一行上显示了所有活动，这样其他程序可以容易解析。</span><br><span class="line">-I：在SMP环境，表示任务的CPU使用率/内核数量</span><br><span class="line">-l：显示命令名和所有参数</span><br></pre></td></tr></table></figure>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/04/21/2019-04-20/" rel="next" title="node进程监控PM2">
                <i class="fa fa-chevron-left"></i> node进程监控PM2
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/tx.jpeg"
                alt="Ethan Hunt" />
            
              <p class="site-author-name" itemprop="name">Ethan Hunt</p>
              <p class="site-description motion-element" itemprop="description">Make more time</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">56</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">20</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#free-看内存"><span class="nav-number">1.</span> <span class="nav-text">free 看内存</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#另一种显示："><span class="nav-number">1.0.1.</span> <span class="nav-text">另一种显示：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ss-网络监控"><span class="nav-number">2.</span> <span class="nav-text">ss 网络监控</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vmstat-机器综合监测mem-cpu-io"><span class="nav-number">3.</span> <span class="nav-text">vmstat 机器综合监测mem,cpu,io</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iostat-磁盘性能"><span class="nav-number">4.</span> <span class="nav-text">iostat 磁盘性能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ps-进程统计"><span class="nav-number">5.</span> <span class="nav-text">ps 进程统计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lsof"><span class="nav-number">6.</span> <span class="nav-text">lsof</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#netstat-网络"><span class="nav-number">7.</span> <span class="nav-text">netstat 网络</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#top-实时监控os"><span class="nav-number">8.</span> <span class="nav-text">top 实时监控os</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ip-查看ip地址"><span class="nav-number">9.</span> <span class="nav-text">ip 查看ip地址</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ls-展示文件创建时间"><span class="nav-number"></span> <span class="nav-text">ls 展示文件创建时间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ps进程启动时间"><span class="nav-number"></span> <span class="nav-text">ps进程启动时间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#cpu系统信息查看proc"><span class="nav-number"></span> <span class="nav-text">cpu系统信息查看proc</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#pidstat-展示进程资源占用统计"><span class="nav-number">1.</span> <span class="nav-text">pidstat 展示进程资源占用统计</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ethan Hunt</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
